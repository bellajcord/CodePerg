{"ast":null,"code":"var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nimport React, { useCallback, useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport DownloadIcon from '@material-ui/icons/GetApp';\nimport { fetchRelatedRecords, useDataProvider, useNotify, ExporterContext } from 'ra-core';\nimport Button from './Button';\n\nvar ExportButton = function (_a) {\n  var sort = _a.sort,\n      _b = _a.filter,\n      filter = _b === void 0 ? defaultFilter : _b,\n      _c = _a.maxResults,\n      maxResults = _c === void 0 ? 1000 : _c,\n      resource = _a.resource,\n      onClick = _a.onClick,\n      _d = _a.label,\n      label = _d === void 0 ? 'ra.action.export' : _d,\n      _e = _a.icon,\n      icon = _e === void 0 ? defaultIcon : _e,\n      rest = __rest(_a, [\"sort\", \"filter\", \"maxResults\", \"resource\", \"onClick\", \"label\", \"icon\"]);\n\n  var exporter = useContext(ExporterContext);\n  var dataProvider = useDataProvider();\n  var notify = useNotify();\n  var handleClick = useCallback(function (event) {\n    dataProvider.getList(resource, {\n      sort: sort,\n      filter: filter,\n      pagination: {\n        page: 1,\n        perPage: maxResults\n      }\n    }).then(function (_a) {\n      var data = _a.data;\n      return exporter && exporter(data, fetchRelatedRecords(dataProvider), dataProvider, resource);\n    }).catch(function (error) {\n      console.error(error);\n      notify('ra.notification.http_error', 'warning');\n    });\n\n    if (typeof onClick === 'function') {\n      onClick(event);\n    }\n  }, [dataProvider, exporter, filter, maxResults, notify, onClick, resource, sort]);\n  return React.createElement(Button, __assign({\n    onClick: handleClick,\n    label: label\n  }, sanitizeRestProps(rest)), icon);\n};\n\nvar defaultIcon = React.createElement(DownloadIcon, null);\nvar defaultFilter = {};\n\nvar sanitizeRestProps = function (_a) {\n  var basePath = _a.basePath,\n      exporter = _a.exporter,\n      rest = __rest(_a, [\"basePath\", \"exporter\"]);\n\n  return rest;\n};\n\nExportButton.propTypes = {\n  basePath: PropTypes.string,\n  exporter: PropTypes.func,\n  filter: PropTypes.object,\n  label: PropTypes.string,\n  maxResults: PropTypes.number,\n  resource: PropTypes.string.isRequired,\n  sort: PropTypes.exact({\n    field: PropTypes.string,\n    order: PropTypes.string\n  }),\n  icon: PropTypes.element\n};\nexport default ExportButton;","map":null,"metadata":{},"sourceType":"module"}